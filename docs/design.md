# 画面構成書

## 1. 全体設計方針

### デザインコンセプト
- **ChatGPT風UI**: 親しみやすく、直感的な操作性
- **ミニマルデザイン**: 必要な機能に集中
- **レスポンシブ**: モバイル・デスクトップ両対応

### カラーパレット
```
Primary: #10a37f (OpenAI Green)
Secondary: #1a202c (Dark Gray)
Background: #ffffff (White)
Text: #2d3748 (Dark Gray)
Border: #e2e8f0 (Light Gray)
Accent: #4299e1 (Blue)
```

### タイポグラフィ
- **主要フォント**: Inter, system-ui, sans-serif
- **コードフォント**: Monaco, Consolas, monospace

## 2. 画面一覧

### 2.1 メイン画面（/）
**目的**: プロンプト最適化のメイン機能
**レイアウト**: ChatGPT風チャット形式

#### ヘッダー部分
```
┌─────────────────────────────────────────────────────────┐
│ 🔧 Prompt Refinery           [GitHub] [ユーザー名 ▼]    │
└─────────────────────────────────────────────────────────┘
```

#### メインチャット領域
```
┌─────────────────────────────────────────────────────────┐
│                                                         │
│  💬 最適化したいプロンプトを入力してください                     │
│                                                         │
│  ┌─────────────────────────────────────────────────────┐  │
│  │ あなたの役に立つプロンプト:                             │  │
│  │                                                     │  │
│  │ 「○○について教えて」                                   │  │
│  │ └─ 🚀 最適化する                                    │  │
│  └─────────────────────────────────────────────────────┘  │
│                                                         │
│  ✨ 最適化結果:                                          │
│                                                         │
│  🎯 **目的分析**                                        │
│  この質問は...                                          │
│                                                         │
│  📝 **構造分離**                                        │
│  • システム指示: ...                                    │
│  • ユーザー入力: ...                                    │
│  • 出力形式: ...                                       │
│                                                         │
│  ✨ **改善案（3パターン）**                               │
│                                                         │
│  📋 **改善案1: 明確化重視**                              │
│  [改善されたプロンプト] 📋 Copy                           │
│                                                         │
│  🔄 **改善案2: 構造化重視**                              │
│  [改善されたプロンプト] 📋 Copy                           │
│                                                         │
│  🎨 **改善案3: 出力品質重視**                             │
│  [改善されたプロンプト] 📋 Copy                           │
│                                                         │
└─────────────────────────────────────────────────────────┘
```

#### 入力エリア
```
┌─────────────────────────────────────────────────────────┐
│ ┌─────────────────────────────────────────────────────┐ │
│ │ プロンプトを入力してください... (2000文字まで)           │ │
│ │                                                     │ │
│ │                                                     │ │
│ └─────────────────────────────────────────────────────┘ │
│                                          [🚀 最適化する] │
│ 💡 効果的なプロンプト作成のコツを学びましょう                │
└─────────────────────────────────────────────────────────┘
```

### 2.2 サイドバー（履歴）
**目的**: 過去の最適化履歴を表示
**表示**: 右側サイドバーまたはモーダル

```
┌─────────────────────────────────┐
│ 📚 最適化履歴                     │
│ ─────────────────────────────── │
│                                 │
│ 🕐 今日                         │
│ • 「マーケティングについて...」    │
│ • 「プログラミング学習...」       │
│                                 │
│ 🕐 昨日                         │
│ • 「データ分析の方法...」         │
│ • 「文章作成のコツ...」          │
│                                 │
│ 🕐 1週間前                      │
│ • 「プレゼン資料作成...」        │
│                                 │
│ ─────────────────────────────── │
│ 📊 合計: 25/50件                │
└─────────────────────────────────┘
```

### 2.3 ログイン画面（/login）
**目的**: GitHub OAuth認証
**デザイン**: 中央配置のシンプルな認証画面

```
┌─────────────────────────────────────────────────────────┐
│                                                         │
│                    🔧 Prompt Refinery                   │
│                                                         │
│            ChatGPT用プロンプトを最適化しよう               │
│                                                         │
│              ┌─────────────────────────────┐              │
│              │  🐙 GitHub でログイン        │              │
│              └─────────────────────────────┘              │
│                                                         │
│            ✨ ワンクリックでプロンプトを改善                │
│            📚 履歴管理で学習効果を最大化                   │
│            🚀 より良いAI体験を始めましょう                 │
│                                                         │
└─────────────────────────────────────────────────────────┘
```

## 3. コンポーネント設計

### 3.1 共通コンポーネント

#### Header
```tsx
interface HeaderProps {
  user: User | null;
  onLogout: () => void;
}
```

#### ChatMessage
```tsx
interface ChatMessageProps {
  type: 'user' | 'assistant';
  content: string;
  timestamp: Date;
  onCopy?: (text: string) => void;
}
```

#### PromptInput
```tsx
interface PromptInputProps {
  value: string;
  onChange: (value: string) => void;
  onSubmit: () => void;
  loading: boolean;
  maxLength: number;
}
```

#### HistorySidebar
```tsx
interface HistorySidebarProps {
  history: PromptHistory[];
  onSelect: (item: PromptHistory) => void;
  isOpen: boolean;
  onToggle: () => void;
}
```

#### OptimizedResult
```tsx
interface OptimizedResultProps {
  result: {
    purpose: string;
    structure: {
      system: string;
      user: string;
      format: string;
    };
    improvements: {
      title: string;
      content: string;
    }[];
  };
  onCopy: (text: string) => void;
}
```

### 3.2 レイアウト構造

#### デスクトップレイアウト
```
┌─────────────────────────────────────────────────────────┐
│ Header (固定)                                           │
├─────────────────────────────────────────────────────────┤
│ Main Content          │ Sidebar (History)               │
│ ├─ Chat Area          │ ├─ History List                 │
│ └─ Input Area         │ └─ Stats                        │
└─────────────────────────────────────────────────────────┘
```

#### モバイルレイアウト
```
┌─────────────────────────────────────────────────────────┐
│ Header (固定)                                           │
├─────────────────────────────────────────────────────────┤
│                                                         │
│ Main Content (フルスクリーン)                             │
│ ├─ Chat Area                                            │
│ └─ Input Area                                           │
│                                                         │
└─────────────────────────────────────────────────────────┘
│ [履歴] ボタン → モーダル表示                              │
```

## 4. インタラクション設計

### 4.1 基本フロー
1. **入力**: ユーザーがプロンプトを入力
2. **送信**: 「最適化する」ボタンクリック
3. **処理**: ローディング表示（8-10秒）
4. **結果**: 最適化結果をチャット形式で表示
5. **アクション**: コピーボタンで各改善案をクリップボードに保存

### 4.2 特殊な状態

#### ローディング状態
```
┌─────────────────────────────────────────────────────────┐
│ 🤖 AIがプロンプトを分析中...                             │
│                                                         │
│ ⏳ 最適化パターンを生成しています                         │
│                                                         │
│ [━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━] 85%              │
└─────────────────────────────────────────────────────────┘
```

#### エラー状態
```
┌─────────────────────────────────────────────────────────┐
│ ❌ エラーが発生しました                                  │
│                                                         │
│ • API制限に達しました（30秒後に再試行）                   │
│ • 文字数制限を超えています（2000文字以内）                │
│ • 一時的なエラーです（しばらくしてから再試行）              │
│                                                         │
│ [🔄 再試行する]                                         │
└─────────────────────────────────────────────────────────┘
```

#### 空の状態
```
┌─────────────────────────────────────────────────────────┐
│                    🚀 Welcome!                          │
│                                                         │
│            プロンプトを入力して始めましょう               │
│                                                         │
│ 💡 例: 「マーケティング戦略について教えて」                │
│ 💡 例: 「効果的な文章の書き方を知りたい」                  │
│ 💡 例: 「データ分析の手順を説明して」                     │
└─────────────────────────────────────────────────────────┘
```

## 5. レスポンシブ対応

### ブレークポイント
- **Mobile**: 0-768px
- **Tablet**: 768-1024px  
- **Desktop**: 1024px+

### 主要な調整点
1. **サイドバー**: デスクトップでは固定、モバイルではモーダル
2. **入力エリア**: モバイルでは下部固定
3. **チャット表示**: モバイルでは余白を最小化
4. **ボタンサイズ**: モバイルでは大きめに調整

## 6. アクセシビリティ

### 対応項目
- **キーボードナビゲーション**: Tab, Enter, Escapeキー対応
- **スクリーンリーダー**: 適切なaria-label設定
- **色覚対応**: 十分なコントラスト比（4.5:1以上）
- **フォーカス表示**: 明確なフォーカスインジケーター

### 実装例
```tsx
<button
  aria-label="プロンプトを最適化する"
  className="focus:ring-2 focus:ring-blue-500"
  disabled={loading}
>
  {loading ? '最適化中...' : '🚀 最適化する'}
</button>
``` 